<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Cmake学习笔记（一）</title>
    <link href="/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1 id="Cmake"><a href="#Cmake" class="headerlink" title="Cmake"></a>Cmake</h1><p>C&#x2F;C++的编译过程中，通过命令处理多个文件的编译是及其复杂。如下所示：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs powershell">├─.idea<br>├─cmake<span class="hljs-literal">-build-debug</span><br>│  ├─.cmake<br>│  │  └─api<br>│  │      └─v1<br>│  │          ├─query<br>│  │          └─reply<br>│  ├─archive<br>│  ├─CMakeFiles<br>│  │  ├─<span class="hljs-number">3.27</span>.<span class="hljs-number">8</span><br>│  │  │  ├─CompilerIdC<br>│  │  │  │  └─tmp<br>│  │  │  └─CompilerIdCXX<br>│  │  │      └─tmp<br>│  │  ├─demo.dir<br>│  │  │  └─src<br>│  │  └─pkgRedirects<br>│  └─Testing<br>│      └─Temporary<br>├─include<br>└─src<br></code></pre></td></tr></table></figure><p>在这个文件夹中有很多文件需要编译，如果使用命令就进行编译，那么就需要输入很多命令，这样就会很麻烦。所以就需要一个工具来进行管理，这个工具就是<strong>cmake</strong>。</p><h3 id="1-1-Cmake的安装"><a href="#1-1-Cmake的安装" class="headerlink" title="1.1 Cmake的安装"></a>1.1 Cmake的安装</h3><p>在<a href="https://cmake.org/download/">cmake官网</a>下载对应的安装包，然后进行安装即可。</p><p>可通过</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cmake <span class="hljs-literal">--version</span><br></code></pre></td></tr></table></figure><p>检测<strong>cmake</strong>是否安装成功。</p><h3 id="2-1使用cmake编译c-文件"><a href="#2-1使用cmake编译c-文件" class="headerlink" title="2.1使用cmake编译c++文件"></a>2.1使用cmake编译c++文件</h3><p>在这个文件夹中，我们首先创建一个<strong>CMakeLists.txt</strong>文件，这个文件就是<strong>cmake</strong>的配置文件，利用这个文件我们就可以进行多文件的管理.</p><p>比如在上面这个文件夹中，我们创建一个<strong>CMakeLists.txt</strong>文件，内容如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-comment">#设置源文件</span><br><span class="hljs-keyword">aux_source_directory</span>(<span class="hljs-variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/src SRC_LIST)<br><br><span class="hljs-comment">#设置头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span> main.cpp)<br></code></pre></td></tr></table></figure><p>之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">mkdir build<br><span class="hljs-built_in">cd</span> build<br>cmake <span class="hljs-literal">-G</span> <span class="hljs-string">&quot;MinGW Makefiles&quot;</span> ..<br></code></pre></td></tr></table></figure><p>然后文件夹中就会出现build文件夹，里面就有<strong>makefile</strong>文件。之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cmake <span class="hljs-literal">--build</span> .<br></code></pre></td></tr></table></figure><p>在build文件夹中就会出现可执行文件。</p><h3 id="2-2cmake-命令"><a href="#2-2cmake-命令" class="headerlink" title="2.2cmake 命令"></a>2.2cmake 命令</h3><p>在上面的例子中，我们使用了<strong>cmake</strong>的一些命令，下面就对这些命令进行介绍。</p><h4 id="cmake-minimum-required"><a href="#cmake-minimum-required" class="headerlink" title="cmake_minimum_required"></a>cmake_minimum_required</h4><p><code>cmake_minimum_required(VERSION 3.27)</code>是设置<strong>cmake</strong>的最低版本。</p><div class="note note-warning">            <p><strong>注意</strong><br>如果版本过低，而我们的<strong>cmake</strong>文件中使用了高版本的命令，那么就会报错。</p>          </div><h4 id="project（）"><a href="#project（）" class="headerlink" title="project（）"></a>project（）</h4><p><code>project(demo)</code>是设置项目名称。一般来说，这个名称和文件夹的名称是一样的。</p><h4 id="set（）"><a href="#set（）" class="headerlink" title="set（）"></a>set（）</h4><p><code>set(&lt;variable&gt; &lt;value&gt; [CACHE &lt;type&gt; &lt;docstring&gt; [FORCE]])</code>这个命令相当于一个变量的定义，其中<code>&lt;variable&gt;</code>是变量的名称，<code>&lt;value&gt;</code>是变量的值，<code>[CACHE &lt;type&gt; &lt;docstring&gt; [FORCE]]</code>是可选的，其中<code>CACHE</code>是缓存，<code>&lt;type&gt;</code>是类型，<code>&lt;docstring&gt;</code>是文档字符串，<code>[FORCE]</code>是强制。</p><div class="note note-info">            <p>在变量赋值中的<code>&lt;value&gt;</code>是可以是多个值的，比如<code>set(SRC_LIST main.cpp test.cpp)</code>，这样就可以将多个文件赋值给变量<code>SRC_LIST</code>，不同的值之间用空格或者 <strong>;</strong> 隔开。</p>          </div><h4 id="aux-source-directory（）"><a href="#aux-source-directory（）" class="headerlink" title="aux_source_directory（）"></a>aux_source_directory（）</h4><p><code>aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</code>是一个所搜的指令，这个命令是将<strong>dir</strong>目录下的所有源文件名称赋值给变量<code>&lt;variable&gt;</code>。</p><h4 id="include-directories（）"><a href="#include-directories（）" class="headerlink" title="include_directories（）"></a>include_directories（）</h4><p><code>include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</code>是一个包含目录的指令，这个命令是将编译时头文件指向<strong>dir1</strong> [dir2 …]。</p><h4 id="add-executable（）"><a href="#add-executable（）" class="headerlink" title="add_executable（）"></a>add_executable（）</h4><p><code>add_executable(&lt;name&gt; [WIN32] [MACOSX_BUNDLE] [EXCLUDE_FROM_ALL] source1 [source2 ...])</code>是一个可执行文件的指令，这个命令是将源文件<code>source</code>编译成可执行文件<code>name</code>。</p><h3 id="cmake的宏"><a href="#cmake的宏" class="headerlink" title="cmake的宏"></a>cmake的宏</h3><p>在<strong>cmake</strong>中，有一些宏是可以直接使用的，这些宏可以直接使用，不需要进行定义。在这里，我将介绍我在上面的例子中使用的宏。</p><h4 id="CMAKE-SOURCE-DIR"><a href="#CMAKE-SOURCE-DIR" class="headerlink" title="CMAKE_SOURCE_DIR"></a>CMAKE_SOURCE_DIR</h4><p><code>CMAKE_SOURCE_DIR</code>是<strong>cmake</strong>的源文件目录，这个目录就是<strong>CMakeLists.txt</strong>所在的目录。</p><h4 id="CMAKE-CURRENT-SOURCE-DIR"><a href="#CMAKE-CURRENT-SOURCE-DIR" class="headerlink" title="CMAKE_CURRENT_SOURCE_DIR"></a>CMAKE_CURRENT_SOURCE_DIR</h4><p><code>CMAKE_CXX_STANDARD</code>是编译器的标准，这个标准是<strong>c++<strong>的标准，这里使用的是</strong>c++17</strong>的标准。</p>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>page</title>
    <link href="/2024/01/19/page/"/>
    <url>/2024/01/19/page/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>使用hexo与fluid搭建自己的blog</title>
    <link href="/2024/01/19/%E4%BD%BF%E7%94%A8hexo%E4%B8%8Efluid%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84blog/"/>
    <url>/2024/01/19/%E4%BD%BF%E7%94%A8hexo%E4%B8%8Efluid%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84blog/</url>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p><strong>注意：</strong></p><p>本文文参考 hexo 与 fluid 的官方文档</p><p>具体内容请参考以下链接:</p><p><a href="https://hexo.io/zh-cn/docs/">hexo 官方文档</a></p><p><a href="https://fluid-dev.github.io/hexo-fluid-docs/start/">fluid 官方文档</a></p>          </div><h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><p>Hexo是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。即把用户的markdown文件，按照指定的主题解析成静态网页。</p><h3 id="1-1安装hexo"><a href="#1-1安装hexo" class="headerlink" title="1.1安装hexo"></a>1.1安装hexo</h3><div class="note note-warning">            <p>注意提前搭建 <strong>node.js</strong> 环境</p><p>可使用</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm <span class="hljs-literal">-v</span><br></code></pre></td></tr></table></figure><p>检测 <strong>node.js</strong> 环境是否配置完成</p>          </div><p>可使用 <strong>npm</strong> 进行安装 <strong>hexo</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">-g</span> hexo<span class="hljs-literal">-cli</span><br></code></pre></td></tr></table></figure><h3 id="1-2初始化blog"><a href="#1-2初始化blog" class="headerlink" title="1.2初始化blog"></a>1.2初始化blog</h3><p>在自己喜欢的文件夹中运行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo init &lt;folder&gt;      <span class="hljs-comment"># 使用hexo初始化blog根目录，相当于新建文件夹</span><br><span class="hljs-built_in">cd</span> &lt;folder&gt;             <span class="hljs-comment"># 进入&lt;folder&gt;文件夹中</span><br>npm install             <span class="hljs-comment"># 安装npm依赖库</span><br></code></pre></td></tr></table></figure><p>完成上述命令后，Hexo就会自动在站点根目录中生成一系列用于生成博客的文件，再输入以下命令，就可以在本地浏览博客：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo g   <span class="hljs-comment"># 生成博客，等同于 hexo generate</span><br>hexo s   <span class="hljs-comment"># 本地预览，等同于 hexo server</span><br></code></pre></td></tr></table></figure><p>在浏览器中访问<code>http://localhost:4000</code>就可本地访问自己的blog</p><p>此时<code>folder</code>中的文件目录为这样</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs powershell">|<span class="hljs-literal">--</span> _config.yml<br>|<span class="hljs-literal">--</span> node_modules<br>|<span class="hljs-literal">--</span> package<span class="hljs-literal">-lock</span>.json<br>|<span class="hljs-literal">--</span> package.json<br>|<span class="hljs-literal">--</span> scaffolds<br>|<span class="hljs-literal">--</span> source<br>|<span class="hljs-literal">--</span> themes<br>|<span class="hljs-literal">--</span> public<br>|<span class="hljs-literal">--</span> db.json<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>若在<code>source</code>新写一篇文章，请运行<code>hexo clean</code>以清除缓存</p>          </div><h3 id="2-1-将本地博客部署到GitHubPages"><a href="#2-1-将本地博客部署到GitHubPages" class="headerlink" title="2.1 将本地博客部署到GitHubPages"></a>2.1 将本地博客部署到GitHubPages</h3><p>最直接的方式使用git将本地博客文件夹关联到GitHub的远程仓库，并且把本地文件push到对应的仓库中。hexo提供了一种更为简洁的方式，只需要在<code>_config.yml</code>文件中进行配置并在命令行中输入相应命令就可以将本地博客发布到GitHubPages上。 首先，打开<code>_config.yml</code>文件，在deployment配置项下设置如下参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>    <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:你GitHub的用户名/你GitHub的用户名.github.io.git</span><br>    <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><p>然后，安装以下插件：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install hexo<span class="hljs-literal">-deployer-git</span> <span class="hljs-literal">-save</span><br></code></pre></td></tr></table></figure><p>最后运行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo d     <span class="hljs-comment">#相当于hexo deploy</span><br></code></pre></td></tr></table></figure><p>此时，在浏览器中输入<code>github用户名.github .io</code>，就可以在互联网上看到本地的博客了</p><h2 id="fluid"><a href="#fluid" class="headerlink" title="fluid"></a>fluid</h2><p>初看<strong>hexo</strong>自带的主题真的不怎么样，但是<strong>hexo</strong>可以使用大量的第三方主题。在这里我使用的就是<strong>fluid</strong>为主题</p><h3 id="3-1安装fliud"><a href="#3-1安装fliud" class="headerlink" title="3.1安装fliud"></a>3.1安装fliud</h3><p>官方提供了两种安装fluid的方式</p><h4 id="使用npm"><a href="#使用npm" class="headerlink" title="使用npm"></a>使用<strong>npm</strong></h4><p>在控制台中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br></code></pre></td></tr></table></figure><h4 id="直接下载"><a href="#直接下载" class="headerlink" title="直接下载"></a>直接下载</h4><p>直接下载<a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">最新的release版本</a>，解压到themes目录，并将解压出来的文件夹改名为<code>fluid </code></p><h3 id="3-2指定主题"><a href="#3-2指定主题" class="headerlink" title="3.2指定主题"></a>3.2指定主题</h3><p>如下修改 Hexo 博客目录中的 <code>_config.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>     <span class="hljs-comment"># 指定主题</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><h3 id="3-3创建关于页"><a href="#3-3创建关于页" class="headerlink" title="3.3创建关于页"></a>3.3创建关于页</h3><p>首次使用主题的「关于页」需要手动创建：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo new page about<br></code></pre></td></tr></table></figure><p>创建成功后修改 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性。</p><p>修改后的文件示例如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">---<br>title: 标题<br><span class="hljs-section">layout: about</span><br><span class="hljs-section">---</span><br><br>这里写关于页的正文，支持 Markdown, HTML<br></code></pre></td></tr></table></figure><div class="note note-warning">            <p><span class="label label-warning"><strong>WARNING</strong></span></p><p>layout: about 必须存在，并且不能修改成其他值，否则不会显示头像等样式。</p>          </div><h3 id="3-4更新主题"><a href="#3-4更新主题" class="headerlink" title="3.4更新主题"></a>3.4更新主题</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><div class="note note-info">            <p>适用于npm安装的用户</p>          </div><p>在博客目录下执行命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm update <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br></code></pre></td></tr></table></figure><h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><div class="note note-info">            <p>适用于通过 Release 压缩包安装主题，且没有自行修改任何代码的情况。</p>          </div><ol><li>先将原文件夹重命名为别的名称，例如 fluid-bkp，用于升级失败进行回退；</li><li>按照安装步骤，重新下载 <a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">release</a>并解压重命名为 <code>fluid</code>；</li><li>如果某些配置发生了变化（改名或弃用），release 的说明里会特别提示，同步修改原配置文件即可.</li></ol><h4 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h4><div class="note note-info">            <p>适用于自定义了一些代码，或想体验其他分支的情况，以 dev 分支为例。</p>          </div><ol><li>确定自己的 fluid 目录已经开启 git，并且所有改动都已 commit；</li><li>把 fluid 仓库的 develop 分支拉取到自己当前的分支上（也可新建一个分支再拉取）：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">git pull https://github.com/fluid<span class="hljs-literal">-dev</span>/hexo<span class="hljs-literal">-theme-fluid</span>.git develop<br></code></pre></td></tr></table></figure></li><li>解决代码冲突，保留自己修改的部分（如何解决冲突可自行搜索）。</li></ol>]]></content>
    
    
    <categories>
      
      <category>网页</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>网页</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
