<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Cmake学习笔记（六）</title>
    <link href="/2024/01/25/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89/"/>
    <url>/2024/01/25/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="1-list-函数"><a href="#1-list-函数" class="headerlink" title="1.list()函数"></a>1.list()函数</h3><p>list()函数除了用于字符串的拼接外，还有其他的用法</p><h4 id="1-1-获得list-的长度"><a href="#1-1-获得list-的长度" class="headerlink" title="1.1 获得list()的长度"></a>1.1 获得list()的长度</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(LENGTH &lt;<span class="hljs-keyword">list</span>&gt; &lt;output variable&gt;)<br></code></pre></td></tr></table></figure><ul><li><code>LENGTH</code>:子命令，用于获取list()的长度</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;output variable&gt;</code>:输出变量，用于存储list()的长度</li></ul><h4 id="1-2-获得列表指定索引的元素"><a href="#1-2-获得列表指定索引的元素" class="headerlink" title="1.2 获得列表指定索引的元素"></a>1.2 获得列表指定索引的元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(GET &lt;<span class="hljs-keyword">list</span>&gt; &lt;element index&gt; [&lt;element index&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>GET</code>:子命令，用于获取list()中指定索引的元素</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;element index&gt;</code>:元素的索引<ul><li>索引从0开始</li><li>可以指定多个索引，用于获取多个元素</li><li>如果索引超出范围，则运行时会报错</li><li>-1表示获取最后一个元素，-2表示获取倒数第二个元素，以此类推</li></ul></li></ul><h4 id="1-3-在列表末尾插入元素"><a href="#1-3-在列表末尾插入元素" class="headerlink" title="1.3 在列表末尾插入元素"></a>1.3 在列表末尾插入元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(APPEND &lt;<span class="hljs-keyword">list</span>&gt; [&lt;element&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>APPEND</code>:子命令，用于在列表末尾插入元素</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;element&gt;</code>:要插入的元素<ul><li>可以指定多个元素，用于一次性插入多个元素</li></ul></li></ul><h4 id="1-4-在列表指定位置插入元素"><a href="#1-4-在列表指定位置插入元素" class="headerlink" title="1.4 在列表指定位置插入元素"></a>1.4 在列表指定位置插入元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(INSERT &lt;<span class="hljs-keyword">list</span>&gt; &lt;insert-index&gt; [&lt;element&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>INSERT</code>:子命令，用于在列表指定位置插入元素</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;insert-index&gt;</code>:插入的位置<ul><li>索引从0开始</li><li>如果索引超出范围，则运行时会报错</li><li>-1表示插入到最后一个元素的后面，-2表示插入到倒数第二个元素的后面，以此类推</li></ul></li><li><code>&lt;element&gt;</code>:要插入的元素</li></ul><h4 id="1-5-将元素插入到列表头部"><a href="#1-5-将元素插入到列表头部" class="headerlink" title="1.5 将元素插入到列表头部"></a>1.5 将元素插入到列表头部</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(PREPEND &lt;<span class="hljs-keyword">list</span>&gt; [&lt;element&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>PREPEND</code>:子命令，用于将元素插入到列表头部</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;element&gt;</code>:要插入的元素</li></ul><h4 id="1-6-删除列表指定位置的元素"><a href="#1-6-删除列表指定位置的元素" class="headerlink" title="1.6 删除列表指定位置的元素"></a>1.6 删除列表指定位置的元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(REMOVE_AT &lt;<span class="hljs-keyword">list</span>&gt; &lt;element index&gt; [&lt;element index&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>REMOVE_AT</code>:子命令，用于删除列表指定位置的元素</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;element index&gt;</code>:要删除的元素的索引</li></ul><h4 id="1-7-删除列表中指定的元素"><a href="#1-7-删除列表中指定的元素" class="headerlink" title="1.7 删除列表中指定的元素"></a>1.7 删除列表中指定的元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(REMOVE_ITEM &lt;<span class="hljs-keyword">list</span>&gt; &lt;value&gt; [&lt;value&gt; ...])<br></code></pre></td></tr></table></figure><ul><li><code>REMOVE_ITEM</code>:子命令，用于删除列表中指定的元素</li><li><code>&lt;list&gt;</code>:list()的名称</li><li><code>&lt;value&gt;</code>:要删除的元素</li></ul><h4 id="1-8-删除列表中的重复元素"><a href="#1-8-删除列表中的重复元素" class="headerlink" title="1.8 删除列表中的重复元素"></a>1.8 删除列表中的重复元素</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(REMOVE_DUPLICATES &lt;<span class="hljs-keyword">list</span>&gt;)<br></code></pre></td></tr></table></figure><ul><li><code>REMOVE_DUPLICATES</code>:子命令，用于删除列表中的重复元素</li><li><code>&lt;list&gt;</code>:list()的名称</li></ul><h4 id="1-9-列表反转"><a href="#1-9-列表反转" class="headerlink" title="1.9 列表反转"></a>1.9 列表反转</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(REVERSE &lt;<span class="hljs-keyword">list</span>&gt;)<br></code></pre></td></tr></table></figure><h4 id="1-10-列表排序"><a href="#1-10-列表排序" class="headerlink" title="1.10 列表排序"></a>1.10 列表排序</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(SORT &lt;<span class="hljs-keyword">list</span>&gt; [COMPARE &lt;compare&gt;] [CASE &lt;case&gt;] [ORDER &lt;order&gt;])<br></code></pre></td></tr></table></figure><ul><li>COMPARE:用于指定比较函数<ul><li>STRING:按照字母顺序排序，是默认的比较函数</li><li>FILE_BASENAME:如果是一系列路径名，按照文件名排序</li><li>NATURAL:按照数字顺序排序</li><li>如果不指定，则使用默认的比较函数</li></ul></li><li>CASE:用于指定比较时是否区分大小写<ul><li>INSENSITIVE:不区分大小写</li><li>SENSITIVE:区分大小写</li><li>如果不指定，则默认区分大小写</li></ul></li><li>ORDER:用于指定排序的顺序<ul><li>ASCENDING:升序</li><li>DESCENDING:降序</li><li>如果不指定，则默认升序</li></ul></li></ul><h3 id="2-string-函数"><a href="#2-string-函数" class="headerlink" title="2.string()函数"></a>2.string()函数</h3><h4 id="2-1-字符串替换"><a href="#2-1-字符串替换" class="headerlink" title="2.1 字符串替换"></a>2.1 字符串替换</h4><p>在<strong>cmake</strong>中，我们可以使用多种方式来替换字符串中的内容。这些替换方法主要可以分为两类：全局替换和单次替换.</p><h5 id="2-1-1-全局替换"><a href="#2-1-1-全局替换" class="headerlink" title="2.1.1 全局替换"></a>2.1.1 全局替换</h5><p>在CMake中，我们可以使用<code>string(REPLACE)</code>来进行全局替换。这个命令会将字符串中所有匹配的子串替换为指定的新子串。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(REPLACE &lt;substring&gt; &lt;replace&gt; &lt;output variable&gt; &lt;input&gt;)<br></code></pre></td></tr></table></figure><ul><li>substring: 被替换的字符串</li><li>replace:替换后的字符串</li><li>output variable:存储替换后的结果</li><li>input:要替换的字符串</li></ul><p>例如，我们可以这样使用<code>string(REGEX REPLACE)</code>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(REGEX REPLACE <span class="hljs-string">&quot;Hello&quot;</span> <span class="hljs-string">&quot;Hi&quot;</span> result <span class="hljs-string">&quot;Hello, Hello!&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;result&#125;</span>)<br></code></pre></td></tr></table></figure><p>结果为：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">Hi, Hi!<br></code></pre></td></tr></table></figure><h4 id="2-1-2-单次替换"><a href="#2-1-2-单次替换" class="headerlink" title="2.1.2 单次替换"></a>2.1.2 单次替换</h4><p>在cmake中，我们可以使用<code>string(REGEX REPLACE)</code>来进行单次替换。这个命令会将字符串中第一个匹配的子串替换为指定的新子串。<br>例如，我们可以这样使用<code>string(REGEX REPLACE)</code>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(REGEX REPLACE <span class="hljs-string">&quot;Hello&quot;</span> <span class="hljs-string">&quot;Hi&quot;</span> result <span class="hljs-string">&quot;Hello, Hello!&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;result&#125;</span>)<br></code></pre></td></tr></table></figure><p>这段代码的结果是：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">Hi, Hello!<br></code></pre></td></tr></table></figure><p>以上就是CMake中字符串替换的基本方法。在实际使用中，我们可以根据需要选择合适的替换方法。</p><h4 id="2-2-字符串的分割"><a href="#2-2-字符串的分割" class="headerlink" title="2.2 字符串的分割"></a>2.2 字符串的分割</h4><p><code>string()</code>函数有多种分割方式，这些分割方法主要可以分为两类：使用<code>string(REGEX MATCHALL)</code>和使用<code>string(STRIP)</code>。</p><h5 id="2-2-1-使用string-REGEX-MATCHALL-进行分割"><a href="#2-2-1-使用string-REGEX-MATCHALL-进行分割" class="headerlink" title="2.2.1 使用string(REGEX MATCHALL)进行分割"></a>2.2.1 使用<code>string(REGEX MATCHALL)</code>进行分割</h5><p>在cmake中，我们可以使用<code>string(REGEX MATCHALL)</code>来进行字符串分割。这个命令会使用正则表达式来匹配字符串中的所有子串。<br>例如，我们可以这样使用<code>string(REGEX MATCHALL)</code>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(REGEX MATCHALL <span class="hljs-string">&quot;[0-9]+&quot;</span> result <span class="hljs-string">&quot;Hello123World456&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;result&#125;</span>)<br></code></pre></td></tr></table></figure><p>这段代码会输出<code>123 456</code>，因为它将字符串<code>&quot;Hello123World456&quot;</code>中的所有数字子串匹配出来</p><h5 id="2-3-2-使用string-STRIP-进行分割"><a href="#2-3-2-使用string-STRIP-进行分割" class="headerlink" title="2.3.2 使用string(STRIP)进行分割"></a>2.3.2 使用<code>string(STRIP)</code>进行分割</h5><p>在cmake中，我们可以使用<code>string(STRIP)</code>来进行字符串分割。这个命令会移除字符串两端的空白字符。<br>例如，我们可以这样使用<code>string(STRIP)</code>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(STRIP result <span class="hljs-string">&quot; Hello World &quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;result&#125;</span>)<br></code></pre></td></tr></table></figure><p>这段代码会输出<code>Hello World</code>，因为它将字符串”<code>Hello World</code>“两端的空白字符移除了。</p><p>以上就是CMake中字符串分割的基本方法。在实际使用中，我们可以根据需要选择合适的分割方法。</p><h4 id="2-3-字符串的替换"><a href="#2-3-字符串的替换" class="headerlink" title="2.3 字符串的替换"></a>2.3 字符串的替换</h4><p>在cmake中，我们可以使用<code>string(REPLACE &lt;substring&gt; &lt;replace&gt; &lt;output variable&gt; &lt;input&gt;)</code><br>函数来替换字符串中的某个子字符串。这在处理测试用例或者其他需要替换的场景中非常有用。</p>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cmake学习笔记（五）</title>
    <link href="/2024/01/24/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/"/>
    <url>/2024/01/24/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h3><p>字符串作为一种极其常见的数据类型，<strong>cmake</strong>也提供了一些字符串操作的函数，这里主要介绍一下<strong>cmake</strong>中常用字符串的操作。</p><h4 id="1-字符串插入"><a href="#1-字符串插入" class="headerlink" title="1.字符串插入"></a>1.字符串插入</h4><p>在*<em>cmake</em>中，由许多函数可以实现字符串的插入操作，这里主要介绍<code>string()``set()</code> <code>list()</code>这三个函数。</p><h5 id="1-1set-函数"><a href="#1-1set-函数" class="headerlink" title="1.1set()函数"></a>1.1<code>set()</code>函数</h5><p><code>set()</code>函数的使用方法如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">set</span>(&lt;变量名&gt; [&lt;值<span class="hljs-number">1</span>&gt; &lt;值<span class="hljs-number">2</span>&gt; ... ])<br></code></pre></td></tr></table></figure><p><code>set()</code>函数的作用是将值1到值n经行拼接，将其存储到变量中，如果变量的值已经存在，则会覆盖原来的值。</p><h5 id="1-2list-函数"><a href="#1-2list-函数" class="headerlink" title="1.2list()函数"></a>1.2<code>list()</code>函数</h5><p><code>list()</code>函数的使用方法如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(&lt;APPEND&gt; &lt;变量名&gt; [&lt;值<span class="hljs-number">1</span>&gt; &lt;值<span class="hljs-number">2</span>&gt; ... ])<br></code></pre></td></tr></table></figure><p>在<code>list()</code>函数中，<code>APPEND</code>说明此时list()函数的作用；链接，是将值1给添加到变量的值后面，如果变量有值，这个操作是不会覆盖原来的值的。</p><div class="note note-info">            <p><code>list()</code>在底层的实现并非直接的字符串拼接，而是将一个个值以<code>;</code>分隔，存储到变量中。</p>          </div><h5 id="1-3string-函数"><a href="#1-3string-函数" class="headerlink" title="1.3string()函数"></a>1.3<code>string()</code>函数</h5><p><code>string()</code>函数的使用方法如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">string</span>(&lt;APPEND&gt; &lt;变量名&gt; [&lt;值<span class="hljs-number">1</span>&gt; &lt;值<span class="hljs-number">2</span>&gt; ... ])<br></code></pre></td></tr></table></figure><p><code>string()</code>函数的用法大致和<code>list()</code>相同。</p><h5 id=""><a href="#" class="headerlink" title=""></a></h5><p>set()函数 list()函数 string()函数在<strong>cmake</strong>中的使用情况如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><br><span class="hljs-keyword">set</span>(STR <span class="hljs-string">&quot;hello&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;STR&#125;</span>)<br><span class="hljs-keyword">set</span>(STR <span class="hljs-string">&quot;world&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;STR&#125;</span>)<br><span class="hljs-keyword">list</span>(APPEND STR <span class="hljs-string">&quot;world&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;STR&#125;</span>)<br><span class="hljs-keyword">string</span>(APPEND STR <span class="hljs-string">&quot;world&quot;</span>)<br><span class="hljs-keyword">message</span>(<span class="hljs-variable">$&#123;STR&#125;</span>)<br></code></pre></td></tr></table></figure><p>在powershell中的输出结果如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hello<br>world<br>worldworld<br>worldworldworld<br></code></pre></td></tr></table></figure><h4 id="2-字符串的删除"><a href="#2-字符串的删除" class="headerlink" title="2.字符串的删除"></a>2.字符串的删除</h4><p>在<strong>cmake</strong>中，我们可以使用<code>string()</code>函数与<code>list()</code>函数来删除字符串中的某些字符，具体内容如下</p><h5 id="2-1list-函数"><a href="#2-1list-函数" class="headerlink" title="2.1list()函数"></a>2.1<code>list()</code>函数</h5><p><code>list()</code>函数的使用方法如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">list</span>(REMOVE_ITEM &lt;变量名&gt; &lt;值<span class="hljs-number">1</span>&gt; [&lt;值<span class="hljs-number">2</span>&gt; ... &lt;值n&gt;])<br></code></pre></td></tr></table></figure><p><code>list()</code>函数在<strong>REMOVE_ITEM</strong>关键字的作用是在变量中找到并删除值为值1的元素。</p><p>以上就是<strong>cmake</strong>中字符串的基本操作，更多的字符串操作可以参考<a href="https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html#manual:cmake-generator-expressions(7)">cmake官方文档</a>。</p>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cmake学习笔记（四）</title>
    <link href="/2024/01/24/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <url>/2024/01/24/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="message-函数"><a href="#message-函数" class="headerlink" title="message()函数"></a>message()函数</h3><p>在<strong>cmake</strong>中，我们可以使用<code>message()</code>函数来为用户打印一条日志信息，使用方法如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">message</span>([&lt;mode&gt;] <span class="hljs-string">&quot;message to display&quot;</span> ...)<br></code></pre></td></tr></table></figure><p>message()<br>函数的参数有两个，第一个参数是这条信息的重要程度，是可选的，第二个参数是我们打算打印的内容，是必选的。当我们使用<code>message()</code><br>函数时，正<strong>cmake</strong>生成<strong>Makefile</strong>的过程中，会将这条信息打印出来。比如下面这个例子：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.15</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-keyword">message</span>(<span class="hljs-string">&quot;hello world&quot;</span>)<br><br><span class="hljs-comment">#添加头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/bin)<br><br><span class="hljs-keyword">aux_source_directory</span>( <span class="hljs-variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/src SRC_LIST)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span> main.cpp)<br><br></code></pre></td></tr></table></figure><p>在<strong>cmake</strong>生成<strong>Makefile</strong>的过程中，<code>powershell</code>中,在的13行打印出<code>hello world</code>这条信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs poweshell">-- The C compiler identification is GNU 8.1.0<br>-- The CXX compiler identification is GNU 8.1.0<br>-- Detecting C compiler ABI info<br>-- Detecting C compiler ABI info - done<br>-- Check for working C compiler: D:/codeproject/mingw64/bin/gcc.exe - skipped<br>-- Detecting C compile features<br>-- Detecting C compile features - done<br>-- Detecting CXX compiler ABI info<br>-- Detecting CXX compiler ABI info - done<br>-- Check for working CXX compiler: D:/codeproject/mingw64/bin/c++.exe - skipped<br>-- Detecting CXX compile features<br>-- Detecting CXX compile features - done<br>hello world<br>-- Configuring done (2.0s)<br>-- Generating done (0.0s)<br>-- Build files have been written to: D:/Code/demo/build<br></code></pre></td></tr></table></figure><h3 id="message-函数的重要程度"><a href="#message-函数的重要程度" class="headerlink" title="message()函数的重要程度"></a>message()函数的重要程度</h3><p>在<code>message()</code>函数中，我们可以设置这条信息的重要程度，这个重要程度常用的有六个等级，分别是：</p><p>-（无）：重要消息</p><ul><li><code>STATUS</code>：非重要消息</li><li><code>WARNING</code>：cmake警告，但生成过程继续</li><li><code>AUTHOR_WARNING</code>：cmake警告(dev)，但生成过程继续</li><li><code>SEND_ERROR</code>：cmake错误，生成过程被跳过</li><li><code>FATAL_ERROR</code>：cmake错误，终止所有的处理过程</li></ul><p>比如下面这个例子：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.15</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><br><span class="hljs-comment">#添加头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/bin)<br><br><span class="hljs-keyword">aux_source_directory</span>( <span class="hljs-variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/src SRC_LIST)<br><br><span class="hljs-keyword">message</span>(WARNING <span class="hljs-string">&quot;warning&quot;</span>)<br><br><span class="hljs-keyword">message</span>(AUTHOR_WARNING <span class="hljs-string">&quot;author_warning&quot;</span>)<br><br><span class="hljs-keyword">message</span>(SEND_ERROR  <span class="hljs-string">&quot;send_error&quot;</span>)<br><br><span class="hljs-keyword">message</span>(FATAL_ERROR <span class="hljs-string">&quot;fatal_error&quot;</span>)<br><br><span class="hljs-keyword">message</span>(STATUS <span class="hljs-string">&quot;status&quot;</span>)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span> main.cpp)<br></code></pre></td></tr></table></figure><p>在运行<strong>cmake</strong>后，<code>powershell</code>中输出如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs powershell">CMake Warning at CMakeLists.txt:<span class="hljs-number">17</span> (message):<br>  warning<br><br><br>CMake Warning (dev) at CMakeLists.txt:<span class="hljs-number">19</span> (message):<br>  author_warning<br>This warning is <span class="hljs-keyword">for</span> project developers.  Use <span class="hljs-literal">-Wno-dev</span> to suppress it.<br><br>CMake Error at CMakeLists.txt:<span class="hljs-number">21</span> (message):<br>  send_error<br><br><br>CMake Error at CMakeLists.txt:<span class="hljs-number">23</span> (message):<br>  fatal_error<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>在这个程序中，只有在运行<code>message(FATAL_ERROR &quot;fatal_error&quot;)</code>后，程序才会直接停止运行。</p>          </div>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cmake学习笔记（三）</title>
    <link href="/2024/01/22/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <url>/2024/01/22/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>我们在使用C++的时候，经常会使用到一些库，比如说<code>iostream</code>，<code>vector</code><br>等等，这些库都是在编译器中自带的，我们只需要在代码中<code>#include</code><br>就可以使用了，而有些库时是第三方库，所以需要我们自己调用，而这个过程由及其复杂，所以我们需要使用Cmake来帮助我们来实现这个过程。</p><h3 id="1-制作静态库与动态库"><a href="#1-制作静态库与动态库" class="headerlink" title="1.制作静态库与动态库"></a>1.制作静态库与动态库</h3><h4 id="1-1-制作静态库"><a href="#1-1-制作静态库" class="headerlink" title="1.1.制作静态库"></a>1.1.制作静态库</h4><p>在<strong>cmake</strong>中，制作静态库需要使用的命令如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">add_library</span>(库名 STATIC 源文件<span class="hljs-number">1</span> [源文件<span class="hljs-number">2</span>...])<br></code></pre></td></tr></table></figure><p>在windows中，静态库的名称为<code>库名.lib</code>，在linux中，静态库的名称为<code>lib库名.a</code>。</p><p>所以在一下文件夹中</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs powershell">│  CMakeLists.txt<br>│  main.cpp<br>│<br>├─bin<br>│      demo.exe<br>│<br>├─build<br>├─include<br>│      head.h<br>│<br>└─src<br>        add.cpp<br>        div.cpp<br>        mult.cpp<br>        sub.cpp<br></code></pre></td></tr></table></figure><p>我们需要将这个文件的内容输出为一个静态库，我们需要在<code>CMakeLists.txt</code>中输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-comment">#添加头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">file</span>(GLOB SRC_LIST <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src/*.cpp)<br><br><span class="hljs-comment">#输出静态库</span><br><span class="hljs-keyword">add_library</span>(demo STATIC <span class="hljs-variable">$&#123;SRC_LIST&#125;</span> )<br></code></pre></td></tr></table></figure><p>此时在build文件夹中就生成一个libdemo.a文件，这就是我们的静态库。</p><h4 id="1-2-制作动态库"><a href="#1-2-制作动态库" class="headerlink" title="1.2.制作动态库"></a>1.2.制作动态库</h4><p>在<strong>cmake</strong>中，制作动态库仅仅只需要将<code>add_library()</code>函数中的<code>STATIC</code>改为<code>SHARED</code>即可。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">add_library</span>(库名 SHARED 源文件<span class="hljs-number">1</span> [源文件<span class="hljs-number">2</span>...])<br></code></pre></td></tr></table></figure><p>在windows中，动态库的名称为<code>库名.dll</code>，在linux中，动态库的名称为<code>lib库名.so</code>。</p><h4 id="1-3修改输出路径"><a href="#1-3修改输出路径" class="headerlink" title="1.3修改输出路径"></a>1.3修改输出路径</h4><p>在上面的例子中，我们的静态库和动态库都是输出在build文件夹中，但是我们希望将其输出到我们想要的文件夹中，但cmake中可以使用CMAKE_LIBRARY_OUTPUT_DIRECTORY与CMAKE_ARCHIVE_OUTPUT_DIRECTORY这两个宏来实现。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">set</span>(CMAKE_LIBRARY_OUTPUT_DIRECTORY <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib) <span class="hljs-comment">#动态库输出路径</span><br><br><span class="hljs-keyword">set</span>(CMAKE_ARCHIVE_OUTPUT_DIRECTORY <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib) <span class="hljs-comment">#静态库输出路径</span><br></code></pre></td></tr></table></figure><p>在CMakeLists.txt中加入这两句后运行cmake，就可以将库输出到lib文件夹中了。</p><div class="note note-secondary">            <p>注意：<br>在使用这两个宏时，需要在<code>add_library()</code>函数之前使用，否则无法生效。<br>若没有lib文件夹，系统会自动创建。</p>          </div><h3 id="2-链接库"><a href="#2-链接库" class="headerlink" title="2.链接库"></a>2.链接库</h3><p>在上面的例子中，我们已经成功的制作了静态库和动态库，但在日常生活中，我们如果使用这些库，所以我们就需要链接这些库。</p><h4 id="2-1-链接静态库"><a href="#2-1-链接静态库" class="headerlink" title="2.1.链接静态库"></a>2.1.链接静态库</h4><p>在<strong>cmake</strong>中，链接静态库需要使用<code>target_link_libraries()</code>函数，函数的第一个参数为需要链接的库，第二个参数为需要链接的库的名称。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">target_link_libraries</span>(可执行文件名 库名)<br></code></pre></td></tr></table></figure><p>在上面的例子中，我们需要链接静态库，所以我们需要在<code>CMakeLists.txt</code>中输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><br><span class="hljs-comment">#添加头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">add_executable</span>(demo main.cpp)<br><br><span class="hljs-comment">#链接静态库</span><br><span class="hljs-keyword">target_link_libraries</span>(demo demo)<br></code></pre></td></tr></table></figure><p>但此时，发现在编译时会报错:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cannot find <span class="hljs-literal">-lcalc</span><br>collect2.exe: error: ld returned <span class="hljs-number">1</span> <span class="hljs-keyword">exit</span> status<br>mingw32<span class="hljs-literal">-make</span>.exe[<span class="hljs-number">2</span>]: *** [<span class="hljs-type">CMakeFiles</span>\<span class="hljs-type">demo.dir</span>\<span class="hljs-type">build.make</span>:<span class="hljs-number">99</span>: <span class="hljs-type">demo.exe</span>] Error <span class="hljs-number">1</span><br>mingw32<span class="hljs-literal">-make</span>.exe[<span class="hljs-number">1</span>]: *** [<span class="hljs-type">CMakeFiles</span>\<span class="hljs-type">Makefile2</span>:<span class="hljs-number">82</span>: <span class="hljs-type">CMakeFiles</span>/<span class="hljs-type">demo.dir</span>/<span class="hljs-type">all</span>] Error <span class="hljs-number">2</span><br>mingw32<span class="hljs-literal">-make</span>.exe: *** [<span class="hljs-type">Makefile</span>:<span class="hljs-number">90</span>: <span class="hljs-type">all</span>] Error <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>这是因为我们生成的库的目录不在系统的环境变量里，所以编译器不知道我们的静态库在哪里，所以我们需要在<code>CMakeLists.txt</code>中加入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#设置静态库路径</span><br><span class="hljs-keyword">link_directories</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib)<br></code></pre></td></tr></table></figure><p>此再在powershell中运行<code>cmake</code>,就不会报错了。</p><h4 id="2-2-链接动态库"><a href="#2-2-链接动态库" class="headerlink" title="2.2.链接动态库"></a>2.2.链接动态库</h4><p>动态库的链接和静态库一样，也是使用<code>target_link_libraries()</code>函数，只是函数的第二个参数为动态库的名字。</p><p>代码如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.15</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-comment">#添加头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-keyword">include</span>)<br><br><span class="hljs-comment">#链接静态库地址</span><br><span class="hljs-keyword">link_directories</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/lib)<br><br><span class="hljs-keyword">add_executable</span>(demo main.cpp)<br><br><span class="hljs-keyword">target_link_libraries</span>(demo  calc)<br></code></pre></td></tr></table></figure><div class="note note-secondary">            <p>注意：<br>无论是静态库还是动态库，都需要在<code>target_link_libraries()</code>函数之前使用<code>link_directories()</code>函数，且需要在<code>add_executable()</code><br>函数之后使用。</p>          </div>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cmake学习笔记（二）</title>
    <link href="/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在这样一个文件夹中</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell">    目录: D:\Code\demo<br>    <br>Mode                 LastWriteTime         Length Name<br><span class="hljs-literal">----</span>                 <span class="hljs-literal">-------------</span>         <span class="hljs-literal">------</span> <span class="hljs-literal">----</span><br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">55</span>             <span class="hljs-number">85</span> add.cpp<br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">55</span>             <span class="hljs-number">99</span> div.cpp<br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">55</span>            <span class="hljs-number">237</span> head.h<br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">56</span>            <span class="hljs-number">247</span> main.cpp<br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">56</span>             <span class="hljs-number">85</span> mult.cpp<br><span class="hljs-literal">-a----</span>         <span class="hljs-number">2024</span>/<span class="hljs-number">1</span>/<span class="hljs-number">20</span>      <span class="hljs-number">9</span>:<span class="hljs-number">55</span>             <span class="hljs-number">87</span> sub.cpp<br></code></pre></td></tr></table></figure><p>我们要编译一个<code>main.cpp</code>文件要同时编译<code>add.cpp div.cpp mult.cpp sub.cpp</code>多个文件，就需要写一个<del>又臭又长</del>的命令</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">g++ <span class="hljs-literal">-o</span> a.exe main.cpp add.cpp sub.cpp mult.cpp div.cpp<br></code></pre></td></tr></table></figure><p>但我们要编辑的文件更多是，这个命令就不是一个普通程序员之力可以写出来的，<br>所以，我们就需要<strong>cmake</strong>来帮助我们来实现这个编译过程。</p><h3 id="1-创建CMakeLists文件"><a href="#1-创建CMakeLists文件" class="headerlink" title="1.创建CMakeLists文件"></a>1.创建CMakeLists文件</h3><p>首先在powershell中输入 <del>(其实直接右键 新建一个夹<strong>CMakeLists</strong>的文本文件就信了)</del></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">echo</span> CMakeLists.txt<br></code></pre></td></tr></table></figure><div class="note note-warning">            <p><strong>注意</strong><br>文件名必须拼写正确，大小写区分</p>          </div><p>在<strong>CMakeLists</strong>中输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br></code></pre></td></tr></table></figure><p>确定cmake最低标准、项目名称、编译器标准。</p><h3 id="2-利用add-executable-创建可执行文件"><a href="#2-利用add-executable-创建可执行文件" class="headerlink" title="2.利用add_executable ()创建可执行文件"></a>2.利用add_executable ()创建可执行文件</h3><p>add_executable()函数可以创建一个可执行文件，这个函数有两个参数，第一个参数是可执行文件的名称 <code>name</code><br>，第二个参数是需要编译的文件 <code>sourse</code>。</p><p>在这里我们需要编译的文件是<code>main.cpp add.cpp sub.cpp mult.cpp div.cpp</code>，所以我们在<strong>CMakeLists</strong>中输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">add_executable</span>(demo main.cpp add.cpp sub.cpp mult.cpp div.cpp)<br></code></pre></td></tr></table></figure><p>之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">mkdir build                   <span class="hljs-comment">#创建一个build文件夹</span><br><span class="hljs-built_in">cd</span> build                      <span class="hljs-comment">#进入build文件夹</span><br>cmake <span class="hljs-literal">-G</span> <span class="hljs-string">&quot;MinGW Makefiles&quot;</span> .. <span class="hljs-comment">#生成makefile文件</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p>在这命令中，<code>cmake -G &quot;MinGW Makefiles&quot; ..</code>是cmake的命令，去构建一个makefile文件，<code>-G</code><br>参数是指定生成的makefile文件的类型，这里我们使用的是<code>MinGW Makefiles</code>，因为我们使用的是<code>MinGW</code>编译器。 <code>..</code>是指定*<br><em>CMakeLists<strong>文件的路径，这里我们使用的是<code>..</code>因为我们在build文件夹中，而</strong>CMakeLists*</em><br>文件在上一级文件夹中，而cmake命令需要在<code>CMakelists.txt</code>文件的同级文件夹中执行。</p>          </div><p>在build文件夹中就会出现<strong>makefile</strong>文件。之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cmake <span class="hljs-literal">--build</span> .<br></code></pre></td></tr></table></figure><p>在build文件夹中就会出现可执行文件 demo.exe。</p><h3 id="3-利用set-函数与aux-source-directory-函数编译多个文件"><a href="#3-利用set-函数与aux-source-directory-函数编译多个文件" class="headerlink" title="3.利用set()函数与aux_source_directory()函数编译多个文件"></a>3.利用set()函数与aux_source_directory()函数编译多个文件</h3><p>在上面的例子中，我们使用了<code>add_executable()</code>函数来创建可执行文件，但是如果我们要编译的文件更多，那么这个命令就会变得很长，再本质上并没有改变我们的工作<br><del>甚至要打的内容更多了</del>。所以我们就需要一个变量去存储我们要编译的文件，而创建这个变量就需要<code>set()</code>函数。</p><p>在我们的<strong>CMakeLists</strong>中输入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#设置源文件</span><br><span class="hljs-keyword">set</span>(SRC_LIST main.cpp add.cpp sub.cpp mult.cpp div.cpp)<br></code></pre></td></tr></table></figure><p>在这里我们将<code>main.cpp add.cpp sub.cpp mult.cpp div.cpp</code>存储在变量<code>SRC_LIST</code>中。</p><div class="note note-info">            <p>我们可以使用空格来分隔文件</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">set</span>(SRC_LIST main.cpp add.cpp sub.cpp mult.cpp div.cpp)<br></code></pre></td></tr></table></figure><p>也可以使用分号<code>;</code>来分隔文件</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">set</span>(SRC_LIST main.cpp;add.cpp;sub.cpp;mult.cpp;div.cpp)<br></code></pre></td></tr></table></figure>          </div><p>之后我们还要修改<code>add_executable()</code>函数中的值，改为</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span>)<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>我们使用${变量名}来获得变量的值</p>          </div><p>此时<code>CMakeLists.txt</code>内容如下</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-keyword">set</span>(SRC_LIST main.cpp;add.cpp;sub.cpp;mult.cpp;div.cpp)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span>)<br></code></pre></td></tr></table></figure><h3 id="4-利用aux-source-directory-函数查找文件"><a href="#4-利用aux-source-directory-函数查找文件" class="headerlink" title="4.利用aux_source_directory()函数查找文件"></a>4.利用aux_source_directory()函数查找文件</h3><p>使用<code>set()</code>后，我们的工作量实际上还是没有变化，因此，我们还需要使用<code>aux_source_directory()</code>函数实现查找功能。</p><p><code>aux_source_directory()</code>函数需要一个参数，即源文件所在的路径，在这里我们可以使用<code>CMAKE_SOURCE_DIR</code>（指向<code>CMakeLists.txt</code><br>文件所在的路径）这个宏来实现。此时，我们只需要在<code>CMakeList.txt</code>文件中写入</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">aux_source_directory</span>( <span class="hljs-comment">#&#123;CMAKE_SOURCE_DIR&#125; SRC_LIST)</span><br></code></pre></td></tr></table></figure><p>此时修改后的<code>CMakeLists.txt</code>的内容为</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-keyword">aux_source_directory</span>( <span class="hljs-variable">$&#123;CMAKE_SOURCE_DIR&#125;</span> SRC_LIST)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span>)<br></code></pre></td></tr></table></figure><h3 id="5-一些其它内容"><a href="#5-一些其它内容" class="headerlink" title="5.一些其它内容"></a>5.一些其它内容</h3><p>在实际中为使文件夹整洁，我们会对文件进行分类。此时我们的文件夹目录如下</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell">D:.<br>├─bin<br>├─build<br>├─include<br>└─src<br></code></pre></td></tr></table></figure><p><code>src</code>文件夹存储源文件，<code>include</code>文件夹存储头文件，<code>bin</code>文件夹存储可执行文件</p><p>因此，我们还需要设置头文件路径以及设置输出路径</p><h4 id="头文件路径"><a href="#头文件路径" class="headerlink" title="头文件路径"></a>头文件路径</h4><p>我们可以使用<code>include_directories()</code>函数来设置头文件路径，函数的参数就是头文件所在的路径</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">include_directories</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/<span class="hljs-keyword">include</span>)<br></code></pre></td></tr></table></figure><h4 id="输出路径"><a href="#输出路径" class="headerlink" title="输出路径"></a>输出路径</h4><p>可执行文件的输出路径由宏<code>EXECUTABLE_OUTPUT_PATH</code>决定，所以我们可以使用<code>SET()</code>函数来设置输出路径</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/bin)<br></code></pre></td></tr></table></figure><h3 id="6-代码"><a href="#6-代码" class="headerlink" title="6.代码"></a>6.代码</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-comment">#设置头文件路径</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/<span class="hljs-keyword">include</span>)<br><br><span class="hljs-comment">#设置源文件</span><br><span class="hljs-keyword">aux_source_directory</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src SRC_LIST)<br><br><span class="hljs-comment">#设置输出路径</span><br><span class="hljs-keyword">SET</span>(EXECUTABLE_OUTPUT_PATH <span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/bin)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cmake学习笔记（一）</title>
    <link href="/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2024/01/20/Cmake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1 id="Cmake"><a href="#Cmake" class="headerlink" title="Cmake"></a>Cmake</h1><p>C&#x2F;C++的编译过程中，通过命令处理多个文件的编译是及其复杂。如下所示：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs powershell">├─.idea<br>├─cmake<span class="hljs-literal">-build-debug</span><br>│  ├─.cmake<br>│  │  └─api<br>│  │      └─v1<br>│  │          ├─query<br>│  │          └─reply<br>│  ├─archive<br>│  ├─CMakeFiles<br>│  │  ├─<span class="hljs-number">3.27</span>.<span class="hljs-number">8</span><br>│  │  │  ├─CompilerIdC<br>│  │  │  │  └─tmp<br>│  │  │  └─CompilerIdCXX<br>│  │  │      └─tmp<br>│  │  ├─demo.dir<br>│  │  │  └─src<br>│  │  └─pkgRedirects<br>│  └─Testing<br>│      └─Temporary<br>├─include<br>└─src<br></code></pre></td></tr></table></figure><p>在这个文件夹中有很多文件需要编译，如果使用命令就进行编译，那么就需要输入很多命令，这样就会很麻烦。所以就需要一个工具来进行管理，这个工具就是<br><strong>cmake</strong>。</p><h3 id="1-1-Cmake的安装"><a href="#1-1-Cmake的安装" class="headerlink" title="1.1 Cmake的安装"></a>1.1 Cmake的安装</h3><p>在<a href="https://cmake.org/download/">cmake官网</a>下载对应的安装包，然后进行安装即可。</p><p>可通过</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cmake <span class="hljs-literal">--version</span><br></code></pre></td></tr></table></figure><p>检测<strong>cmake</strong>是否安装成功。</p><h3 id="2-1使用cmake编译c-文件"><a href="#2-1使用cmake编译c-文件" class="headerlink" title="2.1使用cmake编译c++文件"></a>2.1使用cmake编译c++文件</h3><p>在这个文件夹中，我们首先创建一个<strong>CMakeLists.txt</strong>文件，这个文件就是<strong>cmake</strong>的配置文件，利用这个文件我们就可以进行多文件的管理.</p><p>比如在上面这个文件夹中，我们创建一个<strong>CMakeLists.txt</strong>文件，内容如下：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-comment">#cmake标准</span><br><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.27</span>)<br><span class="hljs-comment">#项目名称</span><br><span class="hljs-keyword">project</span>(demo)<br><br><span class="hljs-comment">#设置编译器</span><br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">17</span>)<br><br><span class="hljs-comment">#设置源文件</span><br><span class="hljs-keyword">aux_source_directory</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src SRC_LIST)<br><br><span class="hljs-comment">#设置头文件</span><br><span class="hljs-keyword">include_directories</span>(<span class="hljs-variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/<span class="hljs-keyword">include</span>)<br><br><span class="hljs-keyword">add_executable</span>(demo <span class="hljs-variable">$&#123;SRC_LIST&#125;</span> main.cpp)<br></code></pre></td></tr></table></figure><p>之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">mkdir build<br><span class="hljs-built_in">cd</span> build<br>cmake <span class="hljs-literal">-G</span> <span class="hljs-string">&quot;MinGW Makefiles&quot;</span> ..<br></code></pre></td></tr></table></figure><p>然后文件夹中就会出现build文件夹，里面就有<strong>makefile</strong>文件。之后在powershell中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">cmake <span class="hljs-literal">--build</span> .<br></code></pre></td></tr></table></figure><p>在build文件夹中就会出现可执行文件。</p><h3 id="2-2cmake-命令"><a href="#2-2cmake-命令" class="headerlink" title="2.2cmake 命令"></a>2.2cmake 命令</h3><p>在上面的例子中，我们使用了<strong>cmake</strong>的一些命令，下面就对这些命令进行介绍。</p><h4 id="cmake-minimum-required"><a href="#cmake-minimum-required" class="headerlink" title="cmake_minimum_required"></a>cmake_minimum_required</h4><p><code>cmake_minimum_required(VERSION 3.27)</code>是设置<strong>cmake</strong>的最低版本。</p><div class="note note-warning">            <p><strong>注意</strong><br>如果版本过低，而我们的<strong>cmake</strong>文件中使用了高版本的命令，那么就会报错。</p>          </div><h4 id="project（）"><a href="#project（）" class="headerlink" title="project（）"></a>project（）</h4><p><code>project(demo)</code>是设置项目名称。一般来说，这个名称和文件夹的名称是一样的。</p><h4 id="set（）"><a href="#set（）" class="headerlink" title="set（）"></a>set（）</h4><p><code>set(&lt;variable&gt; &lt;value&gt; [CACHE &lt;type&gt; &lt;docstring&gt; [FORCE]])</code>这个命令相当于一个变量的定义，其中<code>&lt;variable&gt;</code><br>是变量的名称，<code>&lt;value&gt;</code>是变量的值，<code>[CACHE &lt;type&gt; &lt;docstring&gt; [FORCE]]</code>是可选的，其中<code>CACHE</code>是缓存，<code>&lt;type&gt;</code><br>是类型，<code>&lt;docstring&gt;</code>是文档字符串，<code>[FORCE]</code>是强制。</p><div class="note note-info">            <p>在变量赋值中的<code>&lt;value&gt;</code>是可以是多个值的，比如<code>set(SRC_LIST main.cpp test.cpp)</code>，这样就可以将多个文件赋值给变量<code>SRC_LIST</code><br>，不同的值之间用空格或者 <strong>;</strong> 隔开。</p>          </div><h4 id="aux-source-directory（）"><a href="#aux-source-directory（）" class="headerlink" title="aux_source_directory（）"></a>aux_source_directory（）</h4><p><code>aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</code>是一个所搜的指令，这个命令是将<strong>dir</strong><br>目录下的所有源文件名称赋值给变量<code>&lt;variable&gt;</code>。</p><h4 id="include-directories（）"><a href="#include-directories（）" class="headerlink" title="include_directories（）"></a>include_directories（）</h4><p><code>include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</code>是一个包含目录的指令，这个命令是将编译时头文件指向**dir1<br>** [dir2 …]。</p><h4 id="add-executable（）"><a href="#add-executable（）" class="headerlink" title="add_executable（）"></a>add_executable（）</h4><p><code>add_executable(&lt;name&gt; [WIN32] [MACOSX_BUNDLE] [EXCLUDE_FROM_ALL] source1 [source2 ...])</code><br>是一个可执行文件的指令，这个命令是将源文件<code>source</code>编译成可执行文件<code>name</code>。</p><h3 id="cmake的宏"><a href="#cmake的宏" class="headerlink" title="cmake的宏"></a>cmake的宏</h3><p>在<strong>cmake</strong>中，有一些宏是可以直接使用的，这些宏可以直接使用，不需要进行定义。在这里，我将介绍我在上面的例子中使用的宏。</p><h4 id="CMAKE-SOURCE-DIR"><a href="#CMAKE-SOURCE-DIR" class="headerlink" title="CMAKE_SOURCE_DIR"></a>CMAKE_SOURCE_DIR</h4><p><code>CMAKE_SOURCE_DIR</code>是<strong>cmake</strong>的源文件目录，这个目录就是<strong>CMakeLists.txt</strong>所在的目录。</p><h4 id="CMAKE-CURRENT-SOURCE-DIR"><a href="#CMAKE-CURRENT-SOURCE-DIR" class="headerlink" title="CMAKE_CURRENT_SOURCE_DIR"></a>CMAKE_CURRENT_SOURCE_DIR</h4><p><code>CMAKE_CXX_STANDARD</code>是编译器的标准，这个标准是<strong>c++<strong>的标准，这里使用的是</strong>c++17</strong>的标准。</p>]]></content>
    
    
    <categories>
      
      <category>cmake</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cmake</tag>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用hexo与fluid搭建自己的blog</title>
    <link href="/2024/01/19/%E4%BD%BF%E7%94%A8hexo%E4%B8%8Efluid%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84blog/"/>
    <url>/2024/01/19/%E4%BD%BF%E7%94%A8hexo%E4%B8%8Efluid%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84blog/</url>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p><strong>注意：</strong></p><p>本文文参考 hexo 与 fluid 的官方文档</p><p>具体内容请参考以下链接:</p><p><a href="https://hexo.io/zh-cn/docs/">hexo 官方文档</a></p><p><a href="https://fluid-dev.github.io/hexo-fluid-docs/start/">fluid 官方文档</a></p>          </div><h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><p>Hexo是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。即把用户的markdown文件，按照指定的主题解析成静态网页。</p><h3 id="1-1安装hexo"><a href="#1-1安装hexo" class="headerlink" title="1.1安装hexo"></a>1.1安装hexo</h3><div class="note note-warning">            <p>注意提前搭建 <strong>node.js</strong> 环境</p><p>可使用</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm <span class="hljs-literal">-v</span><br></code></pre></td></tr></table></figure><p>检测 <strong>node.js</strong> 环境是否配置完成</p>          </div><p>可使用 <strong>npm</strong> 进行安装 <strong>hexo</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">-g</span> hexo<span class="hljs-literal">-cli</span><br></code></pre></td></tr></table></figure><h3 id="1-2初始化blog"><a href="#1-2初始化blog" class="headerlink" title="1.2初始化blog"></a>1.2初始化blog</h3><p>在自己喜欢的文件夹中运行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo init &lt;folder&gt;      <span class="hljs-comment"># 使用hexo初始化blog根目录，相当于新建文件夹</span><br><span class="hljs-built_in">cd</span> &lt;folder&gt;             <span class="hljs-comment"># 进入&lt;folder&gt;文件夹中</span><br>npm install             <span class="hljs-comment"># 安装npm依赖库</span><br></code></pre></td></tr></table></figure><p>完成上述命令后，Hexo就会自动在站点根目录中生成一系列用于生成博客的文件，再输入以下命令，就可以在本地浏览博客：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo g   <span class="hljs-comment"># 生成博客，等同于 hexo generate</span><br>hexo s   <span class="hljs-comment"># 本地预览，等同于 hexo server</span><br></code></pre></td></tr></table></figure><p>在浏览器中访问<code>http://localhost:4000</code>就可本地访问自己的blog</p><p>此时<code>folder</code>中的文件目录为这样</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs powershell">|<span class="hljs-literal">--</span> _config.yml<br>|<span class="hljs-literal">--</span> node_modules<br>|<span class="hljs-literal">--</span> package<span class="hljs-literal">-lock</span>.json<br>|<span class="hljs-literal">--</span> package.json<br>|<span class="hljs-literal">--</span> scaffolds<br>|<span class="hljs-literal">--</span> source<br>|<span class="hljs-literal">--</span> themes<br>|<span class="hljs-literal">--</span> public<br>|<span class="hljs-literal">--</span> db.json<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>若在<code>source</code>新写一篇文章，请运行<code>hexo clean</code>以清除缓存</p>          </div><h3 id="2-1-将本地博客部署到GitHubPages"><a href="#2-1-将本地博客部署到GitHubPages" class="headerlink" title="2.1 将本地博客部署到GitHubPages"></a>2.1 将本地博客部署到GitHubPages</h3><p>最直接的方式使用git将本地博客文件夹关联到GitHub的远程仓库，并且把本地文件push到对应的仓库中。hexo提供了一种更为简洁的方式，只需要在<code>_config.yml</code>文件中进行配置并在命令行中输入相应命令就可以将本地博客发布到GitHubPages上。 首先，打开<code>_config.yml</code>文件，在deployment配置项下设置如下参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>    <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:你GitHub的用户名/你GitHub的用户名.github.io.git</span><br>    <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><p>然后，安装以下插件：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install hexo<span class="hljs-literal">-deployer-git</span> <span class="hljs-literal">-save</span><br></code></pre></td></tr></table></figure><p>最后运行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo d     <span class="hljs-comment">#相当于hexo deploy</span><br></code></pre></td></tr></table></figure><p>此时，在浏览器中输入<code>github用户名.github .io</code>，就可以在互联网上看到本地的博客了</p><h2 id="fluid"><a href="#fluid" class="headerlink" title="fluid"></a>fluid</h2><p>初看<strong>hexo</strong>自带的主题真的不怎么样，但是<strong>hexo</strong>可以使用大量的第三方主题。在这里我使用的就是<strong>fluid</strong>为主题</p><h3 id="3-1安装fliud"><a href="#3-1安装fliud" class="headerlink" title="3.1安装fliud"></a>3.1安装fliud</h3><p>官方提供了两种安装fluid的方式</p><h4 id="使用npm"><a href="#使用npm" class="headerlink" title="使用npm"></a>使用<strong>npm</strong></h4><p>在控制台中输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm install <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br></code></pre></td></tr></table></figure><h4 id="直接下载"><a href="#直接下载" class="headerlink" title="直接下载"></a>直接下载</h4><p>直接下载<a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">最新的release版本</a>，解压到themes目录，并将解压出来的文件夹改名为<code>fluid </code></p><h3 id="3-2指定主题"><a href="#3-2指定主题" class="headerlink" title="3.2指定主题"></a>3.2指定主题</h3><p>如下修改 Hexo 博客目录中的 <code>_config.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span>     <span class="hljs-comment"># 指定主题</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span>  <span class="hljs-comment"># 指定语言，会影响主题显示的语言，按需修改</span><br></code></pre></td></tr></table></figure><h3 id="3-3创建关于页"><a href="#3-3创建关于页" class="headerlink" title="3.3创建关于页"></a>3.3创建关于页</h3><p>首次使用主题的「关于页」需要手动创建：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo new page about<br></code></pre></td></tr></table></figure><p>创建成功后修改 <code>/source/about/index.md</code>，添加 <code>layout</code> 属性。</p><p>修改后的文件示例如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">---<br>title: 标题<br><span class="hljs-section">layout: about</span><br><span class="hljs-section">---</span><br><br>这里写关于页的正文，支持 Markdown, HTML<br></code></pre></td></tr></table></figure><div class="note note-warning">            <p><span class="label label-warning"><strong>WARNING</strong></span></p><p>layout: about 必须存在，并且不能修改成其他值，否则不会显示头像等样式。</p>          </div><h3 id="3-4更新主题"><a href="#3-4更新主题" class="headerlink" title="3.4更新主题"></a>3.4更新主题</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><div class="note note-info">            <p>适用于npm安装的用户</p>          </div><p>在博客目录下执行命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">npm update <span class="hljs-literal">--save</span> hexo<span class="hljs-literal">-theme-fluid</span><br></code></pre></td></tr></table></figure><h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><div class="note note-info">            <p>适用于通过 Release 压缩包安装主题，且没有自行修改任何代码的情况。</p>          </div><ol><li>先将原文件夹重命名为别的名称，例如 fluid-bkp，用于升级失败进行回退；</li><li>按照安装步骤，重新下载 <a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">release</a>并解压重命名为 <code>fluid</code>；</li><li>如果某些配置发生了变化（改名或弃用），release 的说明里会特别提示，同步修改原配置文件即可.</li></ol><h4 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h4><div class="note note-info">            <p>适用于自定义了一些代码，或想体验其他分支的情况，以 dev 分支为例。</p>          </div><ol><li>确定自己的 fluid 目录已经开启 git，并且所有改动都已 commit；</li><li>把 fluid 仓库的 develop 分支拉取到自己当前的分支上（也可新建一个分支再拉取）：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">git pull https://github.com/fluid<span class="hljs-literal">-dev</span>/hexo<span class="hljs-literal">-theme-fluid</span>.git develop<br></code></pre></td></tr></table></figure></li><li>解决代码冲突，保留自己修改的部分（如何解决冲突可自行搜索）。</li></ol>]]></content>
    
    
    <categories>
      
      <category>网页</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>网页</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
